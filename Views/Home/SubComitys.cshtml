@{
    ViewData["Title"] = "Sub Committees";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<!-- AngularJS Dynamic Sub-Committees Section -->
<div ng-app="enhancementApp" ng-controller="SubCommitteesEnhancementController">
    <section class="container py-5">
        <h1 class="display-5 fw-bold text-center mb-4">Sub Committees 2025-2026</h1>
        <p class="lead text-center mb-5">Sector 13 Welfare Society – Sub-Committees for the year 2025-2026. Each committee is dedicated to a specific area of welfare and community service. Below are the details and members of each sub-committee.</p>

        <!-- Loader -->
        <div ng-if="isLoading" class="text-center my-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

<style>
.ltr-tree-wrapper {
    width: 100%;
    overflow-x: auto;
    padding-bottom: 1rem;
    display: flex;
    flex-direction: row;
    align-items: flex-start;
}
.ltr-tree-iframe-box {
    min-width: 320px;
    max-width: 420px;
    flex: 0 0 350px;
    height: 500px;
    overflow-y: auto;
    border: 2px solid #90caf9;
    border-radius: 10px;
    background: #f5faff;
    box-shadow: 0 2px 8px rgba(144,202,249,0.08);
    margin-right: 1.5rem;
}
.ltr-tree-root {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    width: 100%;
}
.ltr-tree-level {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    gap: 1rem;
    margin-bottom: 1rem;
}
.ltr-tree-node {
    background: #f5faff;
    border: 1px solid #90caf9;
    border-radius: 10px;
    padding: 1rem 1.5rem;
    min-width: 220px;
    max-width: 320px;
    box-shadow: 0 2px 8px rgba(144,202,249,0.08);
    text-align: center;
    transition: box-shadow 0.2s;
}
.ltr-tree-node:hover {
    box-shadow: 0 4px 16px rgba(144,202,249,0.18);
}
.ltr-title {
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    color: #1976d2;
    margin-bottom: 0.5rem;
}
.ltr-desc {
    font-size: 0.98rem;
    color: #333;
    margin-bottom: 0.7rem;
    white-space: pre-line;
}
.ltr-members-level {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.7rem;
}
.ltr-member-node {
    background: #fff;
    border: 1px solid #e3e3e3;
    border-radius: 8px;
    padding: 0.5rem 0.7rem;
    min-width: 120px;
    max-width: 300px;
    text-align: center;
    transition: box-shadow 0.2s;
}
.ltr-member-node:hover {
    box-shadow: 0 2px 8px rgba(25,118,210,0.10);
}
.ltr-member img {
    width: 48px;
    height: 48px;
    object-fit: cover;
    border-radius: 50%;
    margin-bottom: 0.3rem;
    border: 2px solid #90caf9;
}
.ltr-member span {
    display: block;
    font-size: 0.98rem;
    font-weight: 500;
    color: #222;
}
.ltr-details-panel {
    flex: 1 1 0;
    background: #f8fafc;
    border: 1px solid #e3e3e3;
    border-radius: 10px;
    padding: 1.5rem 2rem;
    min-width: 300px;
    max-width: 700px;
    box-shadow: 0 2px 8px rgba(144,202,249,0.05);
}
.ltr-details-panel h4 {
    color: #1976d2;
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 1rem;
}
.ltr-details-panel .ltr-desc {
    margin-bottom: 1.2rem;
}
.ltr-details-panel .ltr-members-level {
    margin-top: 1.2rem;
}
@@media (max-width: 991px) {
    .ltr-tree-wrapper {
        flex-direction: column;
        padding-bottom: 0;
    }
    .ltr-tree-iframe-box {
        min-width: 0;
        max-width: 100vw;
        flex: unset;
        width: 100%;
        height: auto;
        margin-right: 0;
    }
    .ltr-tree-root {
        min-width: 0;
        max-width: 100vw;
        flex: unset;
        width: 100%;
    }
    .ltr-details-panel {
        margin-left: 0;
        margin-top: 1.5rem;
        min-width: 0;
        max-width: 100vw;
        padding: 1rem 0.5rem;
    }
    .ltr-tree-level, .ltr-members-level {
        flex-direction: column;
        align-items: center;
        gap: 0.7rem;
    }
    .ltr-tree-node, .ltr-member-node {
        min-width: 90vw;
        max-width: 98vw;
        padding: 1rem 0.5rem;
    }
    .ltr-title {
        font-size: 1.05rem;
    }
    .ltr-member img {
        width: 40px;
        height: 40px;
    }
    .ltr-details-panel h4 {
        font-size: 1.05rem;
    }
}
@@media (min-width: 992px) {
  .ltr-tree-level {
    align-items: flex-start;
  }
  .ltr-details-panel {
    margin-left: 0.5rem;
    margin-right: 1.5rem;
    min-width: 320px;
   
    position: static;
    display: inline-block;
    vertical-align: top;
  }
  .ltr-tree-iframe-box {
    background: rgba(245, 250, 255, 0.7);
    backdrop-filter: blur(8px);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18), 0 1.5px 8px 0 rgba(144,202,249,0.10);
    border: 2px solid rgba(144,202,249,0.35);
    animation: fadeInIframeBox 0.7s cubic-bezier(0.4,0,0.2,1);
    transition: box-shadow 0.3s, border 0.3s, background 0.3s;
  }
  @@keyframes fadeInIframeBox {
    from { opacity: 0; transform: translateY(30px) scale(0.98); }
    to { opacity: 1; transform: none; }
  }
  .ltr-tree-node.ltr-committee-node {
    text-align: center;
    font-size: 0.95rem;
    justify-content: center;
    align-items: center;
    display: flex;
    flex-direction: column;
    width: 240px;
    min-width: 240px;
    max-width: 240px;
  }
  .ltr-tree-node.ltr-committee-node:hover {
    background: rgba(144,202,249,0.13);
    box-shadow: 0 4px 16px rgba(25,118,210,0.13);
    transform: translateY(-2px) scale(1.03);
  }
  .ltr-tree-node.ltr-committee-node:active {
    background: #e3f2fd;
    transform: scale(0.98);
  }
  .ltr-tree-node.ltr-committee-node .ltr-title {
    font-size: 1rem;
    text-align: center;
    width: 100%;
  }
}
</style>


<section class="container py-5">
    <h1 class="display-5 fw-bold text-center mb-4">উপ-কমিটি ২০২৫-২০২৬</h1>
    <p class="lead text-center mb-5">উত্তরা সেক্টর ১৩ ওয়েলফেয়ার সোসাইটির ২০২৫-২০২৬ সালের উপ-কমিটিসমূহ। প্রতিটি কমিটি সমাজকল্যাণের নির্দিষ্ট ক্ষেত্রে কাজ করে। কমিটিতে ক্লিক করে সদস্যদের দেখুন।</p>

    <div class="ltr-tree-wrapper">

        <div class="ltr-tree-iframe-box"><div id="ltrTree"></div></div>
        <svg id="ltrTreeSVG" class="ltr-tree-svg"></svg>
    </div>

        <div id="ltrTree"></div>
        <svg id="ltrTreeSVG" class="ltr-tree-svg"></svg>
    </div>


    <!-- Member Details Modal -->
    <div class="modal fade" id="memberModal" tabindex="-1" aria-labelledby="memberModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="memberModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img id="modalPhoto" src="/Photos/logo.png" class="rounded-circle border border-2 mb-3" style="width:100px;height:100px;object-fit:cover;" alt="Member Photo" />
                    <p><strong>পদবী:</strong> <span id="modalRole"></span></p>
                    <p><strong>ফোন:</strong> <span id="modalPhone"></span></p>
                    <p><strong>বিস্তারিত:</strong> <span id="modalDetails"></span></p>
                </div>
            </div>
        </div>
    </div>
</section>


<script>
// Helper to normalize names for matching (removes spaces, punctuation, normalizes common variants)
function normalizeName(name) {
    return name
        .replace(/[\s।.,:;()\-–—'’`]/g, '')
        .replace(/ইঞ্জিনিয়ার|ইঞ্জিনিয়ার/g, 'ইঞ্জিনিয়ার')
        .replace(/মোঃ|মো:|মোহাম্মদ/g, 'মোঃ')
        .replace(/আহ্বায়ক|আহ্বায়ক/g, 'আহ্বায়ক')
        .replace(/নায়েব|নায়েব/g, 'নায়েব')
        .replace(/জালালউদ্দিন|জালাল উদ্দিন/g, 'জালালউদ্দিন')
        .replace(/রিয়াজুল|রিয়াজুল/g, 'রিয়াজুল')
        .replace(/আনোয়ার|আনোয়ার/g, 'আনোয়ার')
        .replace(/বেগম/g, 'বেগম')
        .replace(/\s+/g, '')
        .trim();
}
// Build a normalized image map from ElectedCandidates.cshtml
const memberImagesRaw = {
  'ব্রিগেঃ জেনারেল মোঃ জাহিদ হোসেন (অবঃ) পি.এইচ-ডি': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468730/1_bxznbz.jpg',
  'ইঞ্জিনিয়ার মোঃ আব্দুল লতিফ': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468732/2_aa5u5c.jpg',
  'রাসেল পারভেজ': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468733/3_z1defb.jpg',
  'ইঞ্জিনিয়ার কাজী সফিকুল ইসলাম': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468733/4_ov1vmk.jpg',
  'মোঃ লুৎফর রহমান তালুকদার': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468733/5_m7ca9g.jpg',
  'অধ্যাপক শেখ মাহমুদ আলম': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468734/6_fwobos.jpg',
  'মোহাম্মদ দুলাল উদ্দিন': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468734/7_pwrmxa.jpg',
  'মোঃ আযহারুল ইসলাম জুয়েল': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468734/8_vpcehp.jpg',
  'এস এম সাইফুজ্জামান (মানিক)': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468735/9_daguwl.jpg',
  'মাহমুদা বিলকিস': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/10_adfp2p.jpg',
  'হাজী মোঃ নায়েব আলী': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/11_wab8aq.jpg',
  'এস এম রবিউল আলম': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/12_edykpo.jpg',
  'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/13_d8tfua.jpg',
  'আনোয়ার হোসেন': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/14_sv8u8j.jpg',
  'মোঃ রিয়াজুল আলম': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/15_epjl5p.jpg',
  'রিয়াজুল আলম': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468731/15_epjl5p.jpg',
  'আফরোজা বেগম': 'https://res.cloudinary.com/ddl4hnmnz/image/upload/v1752468732/16_v9llem.jpg'
};
const memberImages = {};
for (const [name, url] of Object.entries(memberImagesRaw)) {
    memberImages[normalizeName(name)] = url;
}

const committees = [
  // 01. অর্থ উপ-কমিটি ঃ
  {
    name: 'অর্থ উপ-কমিটি ঃ',
    desc: `কমিটির দায়িত্বাবলীঃ\nক). ঝুঁকিমুক্ত ও নির্ভুল হিসাব পরিচালনার লক্ষ্যে কার্যপ্রণালী পর্যালোচনা করে প্রয়োজনীয় সংশোধনী প্রস্তাব করা।\nখ) সমিতির সদস্যদের নিকট হতে মাসিক চাঁদা, সার্ভিস চার্জ, ইত্যাদি যথাযথ ও নিয়মিতভাবে সংগ্রহের ব্যবস্থা করা।\nগ). যে কোন বৈধসূত্র থেকে সমিতির জন্য অনুদান সংগ্রহের ব্যবস্থা করা।\nঘ) সমিতির তহবিল, আয়-ব্যয়ের হিসাব প্রস্তুত করা ও নির্বাহী পরিষদকে তা মাসিকভিত্তিতে অবহিত করা।\nঙ) সমিতির আয়-ব্যয়ের হিসাব পরীক্ষার ব্যবস্থা করা এবং পরিষদের অনুমোদনক্রমে নিরীক্ষিত হিসাব নির্বাহী পরিষদ ও সাধারণ সভায় অনুমোদনের জন্য উপস্থাপন করা।\nচ). নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন করা।`,
    members: [
      { name: 'ইঞ্জিনিয়ার কাজী সফিকুল ইসলাম', role: 'আহ্বায়ক', phone: '01720923328', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'মোঃ লুৎফর রহমান তালুকদার', role: 'সদস্য', phone: '01713001353', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'এস এম সাইফুজ্জামান মানিক', role: 'সদস্য', phone: '01911888603', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'মোঃ আনোয়ার হোসেন', role: 'সদস্য', phone: '01619127842', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' }
    ]
  },
  // 02. নিরাপত্তা এবং আবাসিক এলাকায় পানি সমস্যা নিরসন, নির্বিঘ্ন চলাচলে অবৈধ স্থাপনা অপসারণ ও হিজড়া নিয়ন্ত্রণ উপ-কমিটি ঃ
  {
    name: 'নিরাপত্তা এবং আবাসিক এলাকায় পানি সমস্যা নিরসন, নির্বিঘ্ন চলাচলে অবৈধ স্থাপনা অপসারণ ও হিজড়া নিয়ন্ত্রণ উপ-কমিটি ঃ',
    desc: `কমিটির দায়িত্বাবলীঃ\nক) সেক্টরের জন্য একটি সময়োপযোগী নিরাপত্তা নির্দেশিকা প্রণয়ন করে নির্বাহী পরিষদের সভায় উপস্থাপন করা।\nখ) সেক্টরে বসবাসকারী সদস্যদের সার্বিক নিরাপত্তা বিধানে সমিতির নিজস্ব প্রহরী ছাড়াও স্থানীয় আইন প্রয়োগকারী কর্তৃপক্ষের সহযোগিতা গ্রহণ করা।\nগ). নিরাপত্তা প্রহরীদের জন্য প্রাত্যহিক দায়িত্ব বন্টন করা এবং তা নিশ্চিত করা।\nঘ). নিরাপত্তা প্রহরীদের জন্য প্রয়োজনীয় প্রশিক্ষণের ব্যবস্থা এবং মাঝে মধ্যে তাদের ব্রিফিং প্রদান করা।\nঙ). প্রয়োজন অনুযায়ী নতুন নিরাপত্তা কর্মী নিয়োগের সুপারিশ করা।\nচ) সেক্টরের মধ্যে যাতে কোন প্রকার অনৈতিক ও অবৈধ কাজ সংঘটিত হতে না পারে তা নিশ্চিত করা।\nছ). জনগণের নির্বিঘ্ন চলাচলের জন্য সেক্টরস্থ রাস্তা/ফুটপাত থেকে ইট, বালু, পাথর, বাঁশ ইত্যাদি অপসারণের ব্যবস্থা নিতে বাড়ির মালিক/ ডিসিসি / ডেভেলপার/রাজউকের সাথে যোগাযোগ রক্ষা করে প্রয়োজনীয় ব্যবস্থা গ্রহণ ।\nজ) সেক্টরের মধ্যে পানির সমস্যা হলে তা নিরসনে প্রয়োজনীয় পদক্ষেপ গ্রহণ করা।\nট) সেক্টরে হিজড়াদের আচরণে যাতে সেক্টরবাসির কোন প্রকার অসুবিধা না হয় এবং হিজড়াদের সংগেও যাতে সেক্টরবাসির সৌহার্দ্য বজায় থাকে বিষয়টি বিবেচনায় রেখে হিজড়া নেতৃবৃন্দের সংগে আলোচনার মাধ্যমে নিয়ন্ত্রণের ব্যবস্থা করা।\nঝ). প্রতিদিন বিকাল ৪ টা থেকে রাত ১০টা পর্যন্ত মাঠের নিরাপত্তা নিশ্চিতকরণে বিশেষ ব্যবস্থা গ্রহণ ।\nঞ). নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন করা।`,
    members: [
      { name: 'মোঃ লুৎফর রহমান তালুকদার', role: 'আহ্বায়ক', phone: '01673907200', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'মোহাম্মদ দুলাল উদ্দিন', role: 'সদস্য', phone: '01711603446', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'মোঃ আযহারুল ইসলাম জুয়েল', role: 'সদস্য', phone: '01819231856', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'এস এম সাইফুজ্জামান মানিক', role: 'সদস্য', phone: '01911888603', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' },
      { name: 'মোঃ আনোয়ার হোসেন', role: 'সদস্য', phone: '01619127842', details: 'উত্তরা ১৩নং সেক্টর ওয়েলফেয়ার সোসাইটি, উত্তরা, ঢাকা-১২৩০' }
    ]
  },
  // 03. ক্রীড়া ও বিনোদন ...
  {
    name: 'ক্রীড়া ও বিনোদন এবং খেলার মাঠ রক্ষণাবেক্ষণ বিষয়ক উপ-কমিটি',
    desc: `ক) সেক্টরবাসীর ছেলে-মেয়েরা যাতে মাঠে নির্বিঘ্নে খেলাধুলা করতে পারে সে পরিবেশ নিশ্চিত করা।\nখ) সেক্টরস্থ শিশু-কিশোরদের জন্য খেলাধুলা ও বাৎসরিক ক্রীড়া প্রতিযোগিতার ব্যবস্থা করা।\nগ) মাঠটি খেলার উপযুক্ত করে তোলার জন্য মাঠের প্রয়োজনীয় কাজের কর্মপরিকল্পনা গ্রহণ ও তা বাস্তবায়নের জন্য নির্বাহী পরিষদকে সুপারিশ করা।\nঘ) সমিতির আয় বৃদ্ধির লক্ষ্যে নির্বাহী পরিষদ কর্তৃক নির্ধারিত হারে সার্ভিস চার্জ প্রদান শর্তে কোন শিক্ষা প্রতিষ্ঠান বা সংস্থাকে মাঠ ব্যবহারের অনুমতি প্রদানের সুপারিশ করা।\nঙ) খেলার মাঠের পরিবেশ, শৃঙ্খলা ও নিয়মাবলী রক্ষার্থে প্রয়োজনে নিরাপত্তা কর্মীর জন্য নিরাপত্তা সম্পাদককে অনুরোধ করা।\nচ) নির্বাহী পরিষদ প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'মোহাম্মদ দুলাল উদ্দিন', role: 'আহ্বায়ক', phone: '01711603486', details: '' },
      { name: 'মোঃ লুৎফর রহমান তালুকদার', role: 'সদস্য', phone: '01713001353', details: '' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: '' },
      { name: 'রিয়াজুল আলম', role: 'সদস্য', phone: '01712781179', details: '' },
      { name: 'আফরোজা বেগম', role: 'সদস্য', phone: '01927118489', details: '' }
    ]
  },
  // 04. পরিবেশ ও পরিচ্ছন্নতা ...
  {
    name: 'পরিবেশ ও পরিচ্ছন্নতা এবং মশানিধন, গৃহস্থালি আবর্জনা অপসারণ ও বিদ্যুৎ সমস্যা নিরসন উপ-কমিটি',
    desc: `ক) সদস্যবৃন্দের গৃহস্থলি আর্বজনা নিয়মিত অপসারণ নিশ্চিত করা।\nখ) চাঁদা/সার্ভিস চার্জ প্রদানকারী ব্যতীত অন্য কারো গৃহস্থালি আবর্জনা অপসারণ না করা।\nগ) গৃহস্থালি আবর্জনা অপসারণের ভ্যান গাড়িগুলির নিয়মিত রক্ষণাবেক্ষণ নিশ্চিত করা।\nঘ) প্রয়োজন অনুযায়ী ভ্যান গাড়িগুলি মেরামত ও রং করানোর ব্যবস্থা করা।\nঙ) নতুন ভ্যান কেনার প্রয়োজন হলে প্রস্তাব সহকারে তা নির্বাহী পরিষদের নিকট পেশ করা।\nচ) সিটি কর্পোরেশনের সহযোগিতায় ও সমিতির কর্মচারীদের দ্বারা নিয়মিত রাস্তার ধুলাবালি অপসারণ এবং ড্রেন পরিষ্কার করিয়ে স্বাভাবিক স্রোতধারা চালু রাখার ব্যবস্থা করা।\nজ) সেক্টরের মধ্যে বিদ্যুৎ সমস্যা হলে তা নিরসনে প্রয়োজনীয় পদক্ষেপ গ্রহণ করা।\nছ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন করা।`,
    members: [
      { name: 'আনোয়ার হোসেন', role: 'আহ্বায়ক', phone: '01619127842', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: '' },
      { name: 'ইঞ্জিনিয়ার কাজী সফিকুল ইসলাম', role: 'সদস্য', phone: '01720923328', details: '' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: '' },
      { name: 'আফরোজা বেগম', role: 'সদস্য', phone: '01927118489', details: '' }
    ]
  },
  // 05. সালিসি বিষয়ক উপ-কমিটি
  {
    name: 'সালিসি বিষয়ক উপ-কমিটি',
    desc: `ক) সমিতির সদস্যদের মধ্যকার যে কোন ঝগড়া বিবাদের মীমাংসা করে নির্বাহী পরিষদকে অবহিত করা।\nখ) বাড়ির মালিক ও ভাড়াটিয়ার মধ্যকার বিবাদ সমাধানের মধ্যস্থতা করা।\nগ) প্রশাসনিক প্রয়োজনে স্থানীয় থানা কর্তৃপক্ষ, সিটি কর্পোরেশন, রাজউকের সাথে সমন্বয় করে প্রয়োজনীয় ব্যবস্থা গ্রহণ।\nঘ) জায়গা / বাড়ি / ফ্ল্যাট/দখল বা বেদখল এবং ব্যবসায়িক টাকা-পয়সা লেনদেন সংক্রান্ত কোন সালিসি থেকে বিরত থাকা।\nঙ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'মোঃ লুৎফর রহমান তালুকদার', role: 'আহ্বায়ক', phone: '01673907200', details: '' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: '' },
      { name: 'হাজী মোঃ নায়েব আলী', role: 'সদস্য', phone: '01552483850', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: '' },
      { name: 'মোঃ আনোয়ার হোসেন', role: 'সদস্য', phone: '01619127842', details: '' }
    ]
  },
  // 06. শিশু ও মহিলা এবং প্রবীণ বিষয়ক উপ-কমিটি
  {
    name: 'শিশু ও মহিলা এবং প্রবীণ বিষয়ক উপ-কমিটি',
    desc: `ক) বিশ্ব প্রবীণ ও নারী দিবস উদযাপনের ব্যবস্থা করা।\nখ) প্রবীণ ও শিশুদের জন্য চিত্ত-বিনোদনমূলক অনুষ্ঠানের ব্যবস্থা নেয়া।\nগ) অতিবৃদ্ধ, অসহায় প্রবীণদের প্রয়োজনীয় সহায়তা প্রদান করা।\nঘ) নির্বাহী পরিষদ প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'মাহমুদা বিলকিস', role: 'সদস্য', phone: '0171678608', details: '' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: '' },
      { name: 'এস এম সাইফুজ্জামান মানিক', role: 'সদস্য', phone: '01911888603', details: '' },
      { name: 'আফরোজা বেগম', role: 'সদস্য', phone: '01927118489', details: '' }
    ]
  },
  // 07. পার্ক ও বনায়ন ...
  {
    name: 'পার্ক ও বনায়ন এবং লেক সংরক্ষণ, প্রাকৃতিক ও সামাজিক পরিবেশ উন্নয়ন উপ-কমিটি',
    desc: `ক) সেক্টরের ৩টি পার্কের দৈনন্দিন রক্ষণাবেক্ষণ, পরিচর্যা, পার্কের শান্তি শৃঙ্খলা রক্ষার দায়িত্বে থাকিবেন। ইহা ছাড়া তিনি সেক্টরে সবুজ বনায়ন সৃষ্টি, রক্ষণাবেক্ষণ ও পরিচর্যার কাজ করিবেন। তিনি সভাপতি ও সাধারণ সম্পাদকের সহিত পরমার্শ করিয়া তাহার দায়িত্ব পালন করিবেন (গঠনতন্ত্র মোতাবেক)।\nখ) পার্ক ৩টিতে (১. লেক পার্ক, ২. সেক্টরস্থ পার্ক ও ৩. শিশু পার্ক) প্রাকৃতিক ও সামাজিক পরিবেশ রক্ষা করা।\nগ) লেক সংরক্ষণে উত্তরা সিটি কর্পোরেশন ও রাজউকের সাথে কাজ করা।\nঘ) প্রয়োজন অনুযায়ী নতুন প্রজাতির গাছ ও ফুলের চারা রোপনের ব্যবস্থা করা।\nঙ) মাঠের চারদিকে বৃক্ষ রোপন ও বনায়ন কার্য সম্পাদন।\nচ) নির্বাহী পরিষদ প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'মোঃ আযহারুল ইসলাম জুয়েল', role: 'আহ্বায়ক', phone: '01819231856', details: '' },
      { name: 'রাসেল পারভেজ', role: 'সদস্য', phone: '01711477601', details: '' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: '' },
      { name: 'মোহাম্মদ দুলাল উদ্দিন', role: 'সদস্য', phone: '01711603446', details: '' }
    ]
  },
  // 08. ফেরিওয়ালা, হকার, ভিক্ষুক নিয়ন্ত্রণ উপ-কমিটি
  {
    name: 'ফেরিওয়ালা, হকার, ভিক্ষুক নিয়ন্ত্রণ উপ-কমিটি',
    desc: `ক) সেক্টরের ভিতরে ফেরিওয়ালাদের ফেরি করার সময় নির্ধারণ করে দেয়া এবং তাদের নিয়ন্ত্রণে ৬ মাসিক বা ১২ মাসিক একটি ফি নির্ধারণ করে সোসাইটিতে তালিকাভুক্ত করে পরিচয়পত্র দেয়ার জন্য সুপারিশ করা।\nখ) ফেরিওয়ালারা যাতে মানসম্পন্ন মালামাল নিয়ে সেক্টরে প্রবেশ করে, মালামালের মূল্য অতিরিক্ত না নেয় এবং ওজনে সঠিক দেয় তার মনিটরিং করা।\nগ) সেক্টরের ভিতরে হকার ও ভিক্ষুকদের চলাচলে একটি সময় নির্ধারণ করে নিয়ন্ত্রণের ব্যবস্থা করা।\nঘ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'হাজী মোঃ নায়েব আলী', role: 'সদস্য', phone: '01552483890', details: '' },
      { name: 'ইঞ্জিনিয়ার কাজী সফিকুল ইসলাম', role: 'সদস্য', phone: '01720923328', details: '' },
      { name: 'মোঃ লুৎফর রহমান তালুকদার', role: 'সদস্য', phone: '01713001353', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: '' },
      { name: 'মোঃ আযহারুল ইসলাম জুয়েল', role: 'সদস্য', phone: '01819231856', details: '' },
      { name: 'আনোয়ার হোসেন', role: 'সদস্য', phone: '01619127842', details: '' }
    ]
  },
  // 09. দপ্তর বিষয়ক উপ-কমিটি
  {
    name: 'দপ্তর বিষয়ক উপ-কমিটি',
    desc: `ক) দাপ্তরিক দৈনন্দিন কার্য ও সকল প্রকার নথি যথাযথভাবে সংরক্ষণে পরামর্শ প্রদান করা।\nখ) কর্মচারীদের বেতন-ভাতা, সুযোগ সুবিধা সংক্রান্ত নীতিমালা প্রণয়নে সুপারিশ প্রদান এবং প্রয়োজনে বর্তমান বিধিমালার মান উন্নয়নে সুপারিশ করা।\nগ) কর্মচারীদের বাৎসরিক বেতন-ভাতা ও বোনাস বৃদ্ধির সুপারিশ করা।\nঘ) সদস্যদের নথি হালনাগাদ করা ও ভোটার তালিকা প্রনয়ণ করা।\nঙ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন করা।\nচ) সোসাইটির আয় বৃদ্ধি কল্পে নতুন সদস্য অন্তর্ভুক্ত করার প্রয়োজনীয় উদ্যোগ গ্রহণ করা।\nছ) সোসাইটিতে নতুন সদস্য হিসাবে অন্তর্ভুক্ত হওয়ার জন্য আবেদন আসলে গঠনতন্ত্রের আলোকে যাচাই বাছাই করে তা অনুমোদনের জন্য নির্বাহী পরিষদের অনুমোদনের জন্য উপস্থাপন করা।\nজ) সেক্টরের ভিতরে সকল সদস্যের মধ্যে সৌহার্দ্য বজায় রাখার বিষয়ে প্রয়োজনীয় ব্যবস্থা গ্রহণ করা।\nঝ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'রাসেল পারভেজ', role: 'আহ্বায়ক', phone: '01711477601', details: '' },
      { name: 'ইঞ্জিঃ কাজী সফিকুল ইসলাম', role: 'সদস্য', phone: '01720923328', details: '' },
      { name: 'মোহাম্মদ দুলাল উদ্দিন', role: 'সদস্য', phone: '01711603486', details: '' },
      { name: 'এস এম সাইফুজ্জামান মানিক', role: 'সদস্য', phone: '01911888603', details: '' },
      { name: 'রিয়াজুল আলম', role: 'সদস্য', phone: '01712781177', details: '' }
    ]
  },
  // 10. শিক্ষা ও সাংস্কৃতিক উপ-কমিটি
  {
    name: 'শিক্ষা ও সাংস্কৃতিক উপ-কমিটি',
    desc: `ক) স্বাধীনতা দিবস, বিজয় দিবস, নববর্ষ, শহীদ দিবস ও আন্তর্জাতিক মাতৃভাষা দিবস উদযাপনে আলোচনা সভা ও সাংস্কৃতিক অনুষ্ঠানের আয়োজনসহ দিবসগুলো যথাযথ মর্যাদার সহিত পালন করা।\nখ) সম্মানিত মুক্তিযোদ্ধা, শিল্পী, লেখক, ক্রীড়াবিদসহ সাংস্কৃতিক অঙ্গনের অন্যান্য ক্ষেত্রে প্রতিষ্ঠিত ব্যক্তিদের সম্মাননা প্রদান।\nগ) বিভিন্ন পাবলিক পরীক্ষায় উত্তীর্ণ কৃতী ছাত্র-ছাত্রীদের সম্মাননা / পুরস্কৃত করা।\nঘ) শিক্ষা ও সংস্কৃতি সংক্রান্ত অন্যান্য কার্যক্রম গ্রহণ করা।\nচ) নির্বাহী পরিষদ প্রদত্ত অন্য যে কোন দায়িত্ব পালন করা।`,
    members: [
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'আহ্বায়ক', phone: '01321128080', details: '' },
      { name: 'মোহাম্মদ দুলাল উদ্দিন', role: 'সদস্য', phone: '01711603446', details: '' },
      { name: 'মোঃ আনোয়ার হোসেন', role: 'সদস্য', phone: '01619127842', details: '' },
      { name: 'আফরোজা বেগম', role: 'সদস্য', phone: '01927118489', details: '' },
      { name: 'এস এম সাইফুজ্জামান মানিক', role: 'সদস্য', phone: '01911888603', details: '' }
    ]
  },
  // 11. নির্মাণ, মেরামত, সংরক্ষণ ও রক্ষণাবেক্ষণ উপ-কমিটি
  {
    name: 'নির্মাণ, মেরামত, সংরক্ষণ ও রক্ষণাবেক্ষণ উপ-কমিটি',
    desc: `ক) নির্বাহী পরিষদ কর্তৃক অনুমোদিত সকল প্রকার নির্মাণ/ সংস্কারকাজ ও রক্ষণাবেক্ষণ নিশ্চিত করা।\nখ) নির্বাহী পরিষদ কর্তৃক অনুমোদিত প্রকল্পসমূহ যথাসময়ে সম্পন্ন করা।\nগ) সেক্টরের রাস্তার প্রবেশ মুখে লোহার গেইট, বার ও নিরাপত্তা চৌকি নির্মাণ, সংস্কার ও রক্ষণাবেক্ষণ।\nঘ) সেক্টরের রাস্তা, ড্রেন, ল্যাম্প পোস্ট ও ম্যানহোলের ঢাকনা মেরামত/ নির্মাণ/ প্রতিস্থাপনের ব্যবস্থা করা।\nঙ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'আহ্বায়ক', phone: '01712115062', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ আব্দুল লতিফ', role: 'উপদেষ্টা', phone: '01712142708', details: '' },
      { name: 'ইঞ্জিনিয়ার কাজী সফিকুল ইসলাম', role: 'সদস্য', phone: '01720923328', details: '' },
      { name: 'রাসেল পারভেজ', role: 'সদস্য', phone: '01711477601', details: '' },
      { name: 'হাজী মোঃ নায়েব আলী', role: 'সদস্য', phone: '01552483890', details: '' },
      { name: 'রিয়াজুল আলম', role: 'সদস্য', phone: '01712781177', details: '' },
      { name: 'আনোয়ার হোসেন', role: 'সদস্য', phone: '01619127842', details: '' }
    ]
  },
  // 12. প্রচার, প্রকাশনা ও 'তেরোর আমরা' উপ-কমিটি
  {
    name: "প্রচার, প্রকাশনা ও 'তেরোর আমরা' উপ-কমিটি",
    desc: `ক) 'তেরোর আমরা' ত্রৈমাসিক প্রকাশনা যথাসময়ে বের করার লক্ষ্যে বিজ্ঞাপন ও অনুদান সংগ্রহ করা।\nখ) 'তেরোর আমরা' প্রকাশনাটি আরো সুন্দর ও সমৃদ্ধ করার ব্যাপারে চিন্তা-ভাবনা করা।\nগ) সমিতির কার্যাবলী প্রচারে মিডিয়ার সঙ্গে যোগাযোগ রাখা।\nঘ) নির্বাহী পরিষদের সিদ্ধান্ত অনুযায়ী সেক্টরের জনগুরুত্বপূর্ণ কোন ইস্যুর উপর মিডিয়া কভারের আয়োজন করা।\nঙ) নির্বাহী পরিষদ কর্তৃক প্রদত্ত অন্য যে কোন দায়িত্ব পালন।`,
    members: [
      { name: 'ইঞ্জিনিয়ার মোঃ আব্দুল লতিফ', role: 'আহ্বায়ক', phone: '01712142708', details: '' },
      { name: 'অধ্যাপক শেখ মাহমুদ আলম', role: 'সদস্য', phone: '01321128080', details: '' },
      { name: 'এস এম সাইফুজ্জামান মানিক', role: 'সদস্য', phone: '01911888603', details: '' },
      { name: 'ইঞ্জিনিয়ার মোঃ জালাল উদ্দিন খান', role: 'সদস্য', phone: '01712115062', details: '' },
      { name: 'মোঃ রিয়াজুল আলম', role: 'সদস্য', phone: '01712781177', details: '' }
    ]
  }
];

let expandedCommitteeIdx = null;
let showMembersIdx = null;


function isDesktop() {
    return window.innerWidth >= 992;
}

// Add a helper to render only the details panel
function renderDetailsPanel() {
    const wrapper = document.querySelector('.ltr-tree-wrapper');
    // Remove any existing details panel
    const oldPanel = wrapper.querySelector('.ltr-details-panel');
    if (oldPanel) oldPanel.remove();
    if (isDesktop() && expandedCommitteeIdx !== null) {
        const com = committees[expandedCommitteeIdx];
        const detailsPanel = document.createElement('div');
        detailsPanel.className = 'ltr-details-panel';
        detailsPanel.innerHTML = `
            <h4>${com.name}</h4>
            <div class=\"ltr-desc\">${com.desc}</div>
            <button class=\"btn btn-sm btn-outline-primary mb-2\" onclick=\"viewMembers(${expandedCommitteeIdx})\">সদস্য দেখুন</button>
        `;
        if (showMembersIdx === expandedCommitteeIdx) {
            const membersRow = document.createElement('div');
            membersRow.className = 'ltr-tree-level ltr-members-level';
            com.members.forEach(m => {
                const photoUrl = memberImages[normalizeName(m.name)] || '/Photos/logo.png';
                const mNode = document.createElement('div');
                mNode.className = 'ltr-tree-node ltr-member-node';
                mNode.innerHTML = `<div class='ltr-member' onclick=\"showMemberModal('${m.name}','${m.role}','${m.phone}','${m.details}','${photoUrl}')\"><img src='${photoUrl}' alt='Member Photo'/> <span>${m.name}</span></div>`;
                membersRow.appendChild(mNode);
            });
            detailsPanel.appendChild(membersRow);
        }
        wrapper.appendChild(detailsPanel);
        // Scroll selected committee into view (desktop only, but only inside the iframe box)
        const iframeBox = wrapper.querySelector('.ltr-tree-iframe-box');
        const nodes = iframeBox.querySelectorAll('.ltr-tree-node.ltr-committee-node');
        if (nodes[expandedCommitteeIdx]) {
            // Custom scroll logic to avoid scrolling the whole window
            const node = nodes[expandedCommitteeIdx];
            const box = iframeBox;
            const nodeTop = node.offsetTop;
            const nodeHeight = node.offsetHeight;
            const boxHeight = box.clientHeight;
            // Scroll so the node is centered in the box, but don't affect the page scroll
            box.scrollTop = nodeTop - (boxHeight / 2) + (nodeHeight / 2);
        }
    }
}

function createLTRTree() {
    const wrapper = document.querySelector('.ltr-tree-wrapper');
    wrapper.innerHTML = '';

    // Left: Committee list in scrollable iframe-like box
    const iframeBox = document.createElement('div');
    iframeBox.className = 'ltr-tree-iframe-box';
    const treeRoot = document.createElement('div');
    treeRoot.className = 'ltr-tree-root';

function createLTRTree() {
    const treeRoot = document.createElement('div');
    treeRoot.className = 'ltr-tree-root';
    // Committee names row

    const namesRow = document.createElement('div');
    namesRow.className = 'ltr-tree-level';
    committees.forEach((com, idx) => {
        const comNode = document.createElement('div');
        comNode.className = 'ltr-tree-node ltr-committee-node';
        comNode.innerHTML = `<div class=\"ltr-title\" onclick=\"expandCommittee(${idx})\">${com.name}</div>`;
        namesRow.appendChild(comNode);

        // On mobile/tablet, show details inline as before
        if (!isDesktop() && expandedCommitteeIdx === idx) {

        // Insert details and members immediately after the selected committee
        if (expandedCommitteeIdx === idx) {

            // Details node
            const detailsNode = document.createElement('div');
            detailsNode.className = 'ltr-tree-node ltr-committee-node';
            detailsNode.innerHTML = `
                <div class=\"ltr-desc\">${committees[expandedCommitteeIdx].desc}</div>
                <button class=\"btn btn-sm btn-outline-primary\" onclick=\"viewMembers(${expandedCommitteeIdx})\">সদস্য দেখুন</button>
            `;
            namesRow.appendChild(detailsNode);
            // Members row (if requested)
            if (showMembersIdx === expandedCommitteeIdx) {
                const membersRow = document.createElement('div');
                membersRow.className = 'ltr-tree-level ltr-members-level';
                committees[expandedCommitteeIdx].members.forEach(m => {
                    const photoUrl = memberImages[normalizeName(m.name)] || '/Photos/logo.png';
                    const mNode = document.createElement('div');
                    mNode.className = 'ltr-tree-node ltr-member-node';
                    mNode.innerHTML = `<div class='ltr-member' onclick=\"showMemberModal('${m.name}','${m.role}','${m.phone}','${m.details}','${photoUrl}')\"><img src='${photoUrl}' alt='Member Photo'/> <span>${m.name}</span></div>`;
                    membersRow.appendChild(mNode);
                });
                namesRow.appendChild(membersRow);
            }
        }
    });
    treeRoot.appendChild(namesRow);

    iframeBox.appendChild(treeRoot);
    wrapper.appendChild(iframeBox);

    // On desktop, render details panel separately for speed
    if (isDesktop()) {
        renderDetailsPanel();
    }
    if (!isDesktop()) {
        const ltrTree = document.getElementById('ltrTree');
        ltrTree.innerHTML = '';
        ltrTree.appendChild(treeRoot);
    }
    setTimeout(drawLTRConnectors, 300);
}

// Update expandCommittee and viewMembers to only re-render details panel on desktop

    const ltrTree = document.getElementById('ltrTree');
    ltrTree.innerHTML = '';
    ltrTree.appendChild(treeRoot);
    setTimeout(drawLTRConnectors, 300);
}


function expandCommittee(idx) {
    if (expandedCommitteeIdx === idx) {
        expandedCommitteeIdx = null;
        showMembersIdx = null;
    } else {
        expandedCommitteeIdx = idx;
        showMembersIdx = null;
    }

    if (isDesktop()) {
        renderDetailsPanel();
    } else {
        createLTRTree();
    }

    createLTRTree();

}

function viewMembers(idx) {
    showMembersIdx = idx;

    if (isDesktop()) {
        renderDetailsPanel();
    } else {
        createLTRTree();
    }

    createLTRTree();

}

function showMemberModal(name, role, phone, details, photoUrl) {
    document.getElementById('memberModalLabel').textContent = name;
    document.getElementById('modalRole').textContent = role;
    document.getElementById('modalPhone').textContent = phone;
    document.getElementById('modalDetails').textContent = details;
    document.getElementById('modalPhoto').src = photoUrl || '/Photos/logo.png';
    var modal = new bootstrap.Modal(document.getElementById('memberModal'));
    modal.show();
}

function drawLTRConnectors() {
    const svg = document.getElementById('ltrTreeSVG');
    svg.innerHTML = '';
    const root = document.querySelector('.ltr-tree-root');
    if (!root) return;
    const svgRect = svg.getBoundingClientRect();
    // Find all committee nodes
    const namesRow = root.children[0];
    if (!namesRow) return;
    let i = 0;
    while (i < namesRow.children.length) {
        const comNode = namesRow.children[i];
        if (comNode.classList.contains('ltr-committee-node') && expandedCommitteeIdx !== null && i === expandedCommitteeIdx) {
            // Details node is next
            const detailsNode = namesRow.children[i+1];
            if (detailsNode && detailsNode.classList.contains('ltr-committee-node')) {
                const comRect = comNode.getBoundingClientRect();
                const detailsRect = detailsNode.getBoundingClientRect();
                const x1 = comRect.right - svgRect.left;
                const y1 = comRect.top + comRect.height/2 - svgRect.top;
                const x2 = detailsRect.left - svgRect.left;
                const y2 = detailsRect.top + detailsRect.height/2 - svgRect.top;
                const path = document.createElementNS('http://www.w3.org/2000/svg','path');
                path.setAttribute('d', `M${x1},${y1} C${x1+40},${y1} ${x2-40},${y2} ${x2},${y2}`);
                path.setAttribute('stroke', '#90caf9');
                path.setAttribute('stroke-width', '3');
                path.setAttribute('fill', 'none');
                svg.appendChild(path);
                // Members row is next
                if (showMembersIdx === expandedCommitteeIdx && namesRow.children[i+2]) {
                    const membersRow = namesRow.children[i+2];
                    for (let j = 0; j < membersRow.children.length; j++) {
                        const memberNode = membersRow.children[j];
                        const mRect = memberNode.getBoundingClientRect();
                        const x3 = detailsRect.right - svgRect.left;
                        const y3 = detailsRect.top + detailsRect.height/2 - svgRect.top;
                        const x4 = mRect.left - svgRect.left;
                        const y4 = mRect.top + mRect.height/2 - svgRect.top;
                        const path2 = document.createElementNS('http://www.w3.org/2000/svg','path');
                        path2.setAttribute('d', `M${x3},${y3} C${x3+40},${y3} ${x4-40},${y4} ${x4},${y4}`);
                        path2.setAttribute('stroke', '#bdbdbd');
                        path2.setAttribute('stroke-width', '2');
                        path2.setAttribute('fill', 'none');
                        svg.appendChild(path2);
                    }
                }
            }
            // Skip over details and members if present
            i += 1 + (showMembersIdx === expandedCommitteeIdx ? 1 : 0);
        }
        i++;
    }
}


window.addEventListener('resize', function() {
    createLTRTree();
});


window.addEventListener('resize', drawLTRConnectors);

window.onload = function() {
    createLTRTree();
    setTimeout(drawLTRConnectors, 500);
};

</script> 

</script> 
